@model IEnumerable<RSS_Reader.Entities.Feed>
@{
    ViewData["Title"] = "Feeds";
}

<div class="d-flex align-items-center justify-content-between mb-3">
    <h2>Feeds</h2>
    <a class="btn btn-primary" asp-action="Create">Add Feed</a>
</div>

<form method="post" asp-action="BulkDelete">
    <div class="mb-2">
        <button type="button" id="checkAll" class="btn btn-sm btn-outline-secondary">Check All</button>
        <button type="submit" class="btn btn-sm btn-danger">Delete Selected</button>
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th></th> <!-- Checkbox column -->
                <th>Name</th>
                <th>URL</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var feed in Model)
            {
                <tr>
                    <td>
                        <input type="checkbox" name="ids" value="@feed.Id" class="feed-checkbox" />
                    </td>
                    <td>@feed.Name</td>
                    <td>@feed.Url</td>
                    <td>
                        <a asp-action="Details" asp-route-id="@feed.Id" class="btn btn-sm btn-info">Details</a>
                        <a asp-action="Delete" asp-route-id="@feed.Id" class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</form>

@section Scripts {
    <script>
        // Toggle all checkboxes when "Check All" button is clicked
        document.getElementById('checkAll').addEventListener('click', function() {
            const checkboxes = document.querySelectorAll('.feed-checkbox');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);
            checkboxes.forEach(cb => cb.checked = !allChecked);
        });
    </script>
}